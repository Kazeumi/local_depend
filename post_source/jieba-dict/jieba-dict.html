


<!--yaml
---
layout: post
mermaid: false
mathjax2: false
mathjax: false
highlight: true
title: "jieba：使用自訂詞庫斷詞"
description: ""
tags: [Text, Mining, R, 中文]
---
yaml-->
<p>在進行中文 Text Mining 前處理時，必須先經過斷詞處理。社群當中存在相當好的斷詞處理工具，如 <a href="https://github.com/fxsjy/jieba">jieba</a>。但斷詞時常遇到一個問題：<strong>文本中重要的詞彙因為不常見於其它地方而被斷開，像是人物角色名稱</strong>。要處理這個問題，需將自訂詞庫提供給斷詞套件，其才不會將重要詞彙斷開。 <!--more--></p>
<p>這邊將使用 <a href="https://github.com/qinwf/jiebaR">jiebaR</a>，介紹使用自訂詞庫的斷詞方式。同時也提供一種自訂詞庫的製作方式。</p>
<div class="section level2">
<h2>示範語料</h2>
<p>這裡使用金庸<strong><a href="https://zh.wikipedia.org/wiki/%E7%A5%9E%E9%B5%B0%E4%BF%A0%E4%BE%B6">神雕俠侶</a>第三十二回 — 情是何物</strong>作為斷詞的文本。武俠小說在此是個很好的例子，因為裡面有許多人物名稱和專有名詞。</p>
<p>在此因為著作權問題<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>，語料的原始檔(<code>032.txt</code>)將不會出現在本文的 <a href="https://github.com/liao961120/local_depend/tree/master/post_source/jieba-dict">GitHub repo</a> 中。</p>
</div>
<div class="section level2">
<h2>維基百科角色列表</h2>
<p><a href="https://zh.wikipedia.org/wiki/%E7%A5%9E%E9%B5%B0%E4%BF%A0%E4%BE%B6%E8%A7%92%E8%89%B2%E5%88%97%E8%A1%A8">神鵰俠侶角色列表</a></p>
<pre class="r"><code>library(readr)
library(rvest)
library(stringr)
library(dplyr)
library(jiebaR)

data &lt;- read_html(&quot;神鵰俠侶角色列表.html&quot;) %&gt;%
    html_nodes(&quot;ul&quot;) %&gt;% html_nodes(&quot;li&quot;) %&gt;%
        html_nodes(&quot;a&quot;) %&gt;% html_text()</code></pre>
<pre class="r"><code>data &lt;- unique(data)

data[1:3]</code></pre>
<pre><code>[1] &quot;1 主角&quot;           &quot;2 桃花島&quot;         &quot;2.1 「北丐」門派&quot;</code></pre>
<pre class="r"><code>data[21:25]</code></pre>
<pre><code>[1] &quot;楊過&quot;       &quot;射鵰英雄傳&quot; &quot;楊康&quot;       &quot;穆念慈&quot;     &quot;全真教&quot;    </code></pre>
<pre class="r"><code>data[207:211]</code></pre>
<pre><code>[1] &quot;射雕英雄传角色列表&quot; &quot;倚天屠龙记角色列表&quot; &quot;查&quot;                
[4] &quot;论&quot;                 &quot;编&quot;                </code></pre>
<pre class="r"><code>data &lt;- as_data_frame(data)
data &lt;- data[43:548,] %&gt;% unique()
data &lt;- data[-c(2, 22, 128, 139,200:209),] %&gt;% rbind(&quot;過兒&quot;)
write_csv(data, &quot;sdxl_wordlist.csv&quot;)</code></pre>
<p style="text-align:right;font-size:8px;margin-top:0px; margin-bottom:0px;padding-top:0px;padding-bottom:0px">
上次更新：2018-07-31
</p>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>本文目的僅在促進教育與學術，並無營利導向。且本文僅顯示極少的小說內容，應在合理使用的範圍內。若有侵犯著作權的疑慮，麻煩透過 <a href="mailto:liaomovie2@gmail.com">Email</a> 與我聯絡。<a href="#fnref1">↩</a></p></li>
</ol>
</div>

