---
title: "My Linux Notes"
subtitle: "A Quick Reference"
author: "[Yongfu Liao](https://liao961120.github.io/)"
date: "`r format(Sys.Date(), '%B %d, %Y')`"
link-citations: yes
output:
  bookdown::html_document2:
    css: /home/liao/local_depend/style_sheets/style.css
    df_print: kable
    toc: true
    toc_depth: 2
    toc_float:
        collapsed: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
	echo = TRUE,
	message = FALSE,
	warning = FALSE,
	dev='svg',
	fig.dim = c(5.5, 3.5)  # (width, height)
)
```


Navigation
=====

## Soft Link

Syntax: `ln -s <target> <link-name>`

e.g.
```bash
ln -s $(pwd)/blah.txt ~/Desktop/blah-sym
```



Network
=====


## Setup SSH

### Server Setup{-}
Install SSH Server (so be connected by a remote client):
```bash
sudo apt-get install openssh-server
```

Configure:
```bash
sudo gedit /etc/ssh/sshd_config
```

> Port 22
> PasswordAuthentication yes
> PermitRootLogin yes

Findout IP address locally: `hostname -I`


### Client Setup{-}

Access from remote via SSH:

Syntax: `ssh <server-user-account>@<ip>`

e.g.
```bash
ssh liao961120@192.168.2.110
```


Remote Control Via SSH
=====

## Hardware Configuration

1. Fix floating IP
(Alternative: auto push IP address when turned on
https://superuser.com/questions/471253/ubuntu-how-to-run-a-terminal-command-on-boot)
2. Enable Auto Turn-on Computer at 
	- Enter `BIOS` > `Power Management Setup` > Enable `Power on by RTC Alarm` > Set `Date & Time`[^utc]

[^utc]: Note the date time is in [Coordinated Universal Time (UTC) Standard](https://en.wikipedia.org/wiki/Coordinated_Universal_Time), so it's -8 hrs from the time in Taiwan.

## wakeonlan

wakeonlan -i <broadcast-ip> <MAC>

```bash
wakeonlan -i 192.168.2.255 44:87:fc:a1:0b:cc
wakeonlan -i $rm_ip_b $rm_MAC
```

## SSH login

ssh liao961120@<ip>

```bash
ssh liao961120@192.168.2.110
ssh $ssh_pc
```

## SSH logout & suspend computer

1. `sudo bash -c "sleep 15s; pm-suspend" &`: Set buffer time for suspend
2. `Ctrl+D`: Use the 15 sec to logout

## Variable Definition (in `~/.bashrc`)
```bash
rm_MAC="44:87:fc:a1:0b:cc"
rm_ip="192.168.2.110"
rm_ip_b=`bash ~/ip2ipb.sh 196.168.2.110`
ssh_pc="liao961120@$rm_ip"
```
